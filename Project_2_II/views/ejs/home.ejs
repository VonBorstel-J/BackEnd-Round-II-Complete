<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>Product Catalog</title>

    <!-- External Stylesheets -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" crossorigin="anonymous">
    <link rel="stylesheet" href="/vegas/vegas.min.css">
    <link rel="stylesheet" href="/css/styles.css">

    <!-- External Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/vue@3.2.8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.min.js"></script>

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-32x32.png">


</head>
<body>

    <!-- Header Navigation -->
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
            <a class="navbar-brand" href="/">Product Catalog</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/products">Products</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/contact">Contact</a>
                    </li>
                </ul>
                <div class="search-login-container">
                    <button class="btn btn-outline-light my-2 my-sm-0" type="button"
                        data-toggle="modal" data-target="#loginModal">Login/Signup</button>
                </div>
            </div>
        </nav>

    <!-- Login/Signup Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="loginModalLabel">Login/Signup</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              <div id="login-modal-app">
                  <login-modal v-if="showModal" @close="showModal = false"></login-modal>
                  <div>test content</div>
              </div>
          </div>
      </div>
  </div>
</div>

<!-- Login/Signup Modal Content -->
<template id="login-modal-template">
  <div class="login-modal">
      <div class="login-modal-tabs">
          <button class="login-modal-tab" :class="{ 'active': isLogin }" @click="isLogin = true">Login</button>
          <button class="login-modal-tab" :class="{ 'active': !isLogin }" @click="isLogin = false">Signup</button>
      </div>
      <div class="login-modal-form">
          <!-- Login form -->
          <form v-if="isLogin" @submit.prevent="login">
              <div class="form-group">
                  <label for="email">Email</label>
                  <input type="email" class="form-control" id="email" v-model="email" required>
              </div>
              <div class="form-group">
                  <label for="password">Password</label>
                  <input type="password" class="form-control" id="password" v-model="password" required>
              </div>
              <button type="submit" class="btn btn-primary" id="loginButton">Login</button>
              <a href="#" @click="isLogin = false">Don't have an account? Sign up here.</a>
          </form>
          <!-- Sign up form -->
          <form v-else @submit.prevent="signup">
              <div class="form-group">
                  <label for="firstName">First Name</label>
                  <input type="text" class="form-control" id="firstName" v-model="firstName" required>
              </div>
              <div class="form-group">
                  <label for="lastName">Last Name</label>
                  <input type="text" class="form-control" id="lastName" v-model="lastName" required>
              </div>
              <div class="form-group">
                  <label for="email">Email</label>
                  <input type="email" class="form-control" id="email" v-model="email" required>
              </div>
              <div class="form-group">
                  <label for="password">Password</label>
                  <input type="password" class="form-control" id="password" v-model="password" required>
              </div>
              <button type="submit" class="btn btn-primary">Sign up</button>
              <a href="#" @click="isLogin = true">Already have an account? Log in here.</a>
          </form>
      </div>
  </div>
</template>


    <!-- Hero Section -->
    <main>
      <section id="hero" class="container-fluid py-5">
        <div class="row align-items-center">
          <div class="col-md-6 text-center text-md-start">
            <h1 class="display-2 mb-3">Discover Your Next Favorite Product</h1>
            <p class="lead mb-4">
              Explore our hand-picked selection of the latest and greatest
              products.
            </p>
            <a href="/products" class="btn btn-primary btn-lg">
              View Our Products
            </a>
          </div>
          <div class="col-md-6">
            <div id="hero" class="hero-image"></div>
          </div>
        </div>
      </section>

      <!-- Services Section -->
      <section id="services" class="container my-5">
        <h2 class="text-center mb-5">Our Services</h2>
        <div class="row">
          <div class="col-md-4 mb-4">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Fast Shipping</h5>
                <p class="card-text">
                  We offer fast and reliable shipping to get your products to
                  you as soon as possible.
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Quality Products</h5>
                <p class="card-text">
                  We source only the highest quality products from trusted
                  suppliers to ensure your satisfaction.
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Excellent Customer Service</h5>
                <p class="card-text">
                  Our dedicated customer service team is always available to
                  answer your questions and help you find what you need.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- About Section -->
      <section id="about" class="container my-5">
        <h2 class="text-center mb-5">About Us</h2>
        <div class="row">
          <div class="col-md-6">
            <img
              alt="About Us"
              class="img-fluid rounded"
            />
          </div>
          <div class="col-md-6 my-auto">
            <p class="lead">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec
              accumsan, urna sed ultricies euismod, massa purus bibendum metus,
              vel ultricies ex metus at justo. Praesent in consectetur risus.
            </p>
            <p>
              Morbi vel est id est finibus placerat. Suspendisse consectetur
              suscipit aliquam. Suspendisse faucibus quam ut elit vestibulum,
              vel fermentum libero efficitur. Vivamus pellentesque, erat nec
              varius efficitur, magna mauris hendrerit elit, ac dictum libero
              sapien sit amet neque. Etiam tempor elementum mi, vel iaculis
              neque eleifend eget. Fusce lobortis ipsum eu orci varius, at
              congue velit dignissim.
            </p>
          </div>
        </div>
      </section>
    </main>

    <% include('./footer') %>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/axios@0.21.1"></script>
<script src="/vegas/vegas.min.cjs"></script>
<!-- <script src="/views/hero.cjs"></script> -->
<script>
  const { createApp, ref } = Vue;

  const loginModalApp = {
    setup() {
      const showModal = ref(false);
      const isLogin = ref(true);
      const email = ref("");
      const password = ref("");
      const firstName = ref("");
      const lastName = ref("");

      const login = async () => {
        try {
          const response = await axios.post("/api/users/login", {
            email: email.value,
            password: password.value,
          });
          localStorage.setItem("token", response.data.token);
          window.location.reload();
        } catch (error) {
          alert("Invalid email or password");
        }
      };

      const signup = async () => {
        try {
          await axios.post("/users", {
            email: email.value,
            password: password.value,
            firstName: firstName.value,
            lastName: lastName.value,
          });
          const response = await axios.post("/api/users/login", {
            email: email.value,
            password: password.value,
          });
          localStorage.setItem("token", response.data.token);
          window.location.reload();
        } catch (error) {
          alert("An error occurred while signing up");
        }
      };

      return {
        showModal,
        isLogin,
        email,
        password,
        firstName,
        lastName,
        login,
        signup,
      };
    },
  };

  createApp(loginModalApp).mount("#login-modal-app");

  $(document).ready(function() {
    $('#loginButton').on('click', async () => {
        const email = $('#email').val();
        const password = $('#password').val();

        try {
          const response = await axios.post('/api/users/login', { email, password });
          localStorage.setItem('token', response.data.token);
          window.location.href = '/dashboard';
        } catch (error) {
          console.error(error);
        }
    });
  });
</script>
<script src="/dist/bundle.js"></script>
<script src="/dist/hero.bundle.js"></script>
  </body>
</html>
